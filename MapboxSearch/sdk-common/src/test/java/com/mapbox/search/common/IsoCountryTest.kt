package com.mapbox.search.common

import com.mapbox.test.dsl.TestCase
import org.junit.jupiter.api.Assertions
import org.junit.jupiter.api.TestFactory

internal class IsoCountryTest {

    @TestFactory
    fun `Check countries and country code`() = TestCase {
        ALL_COUNTRIES.forEach { (inputValue, expectedValue) ->

            Given("Country = $inputValue") {
                When("Get country code") {
                    val actualValue = inputValue.code
                    Then("It should be <$expectedValue>") {
                        Assertions.assertEquals(expectedValue, actualValue)
                    }

                    Then("Length should be 2") {
                        Assertions.assertEquals(2, actualValue.length)
                    }
                }
            }
        }
    }

    @TestFactory
    fun `Check all country codes should be unique`() = TestCase {
        Given("Countries from code") {
            val codeCountries = ALL_COUNTRIES.keys.map { it.code }
            When("Get list of duplicates") {
                val duplicates = codeCountries.groupingBy { it }.eachCount().filter { it.value > 1 }
                Then("It should empty") {
                    Assertions.assertEquals(emptyMap<String, Int>(), duplicates)
                }
            }
        }
    }

    private companion object {

        val ALL_COUNTRIES: Map<IsoCountry, String> = mapOf(
            IsoCountry.AFGHANISTAN to "af",
            IsoCountry.ALAND_ISLANDS to "ax",
            IsoCountry.ALBANIA to "al",
            IsoCountry.ALGERIA to "dz",
            IsoCountry.AMERICAN_SAMOA to "as",
            IsoCountry.ANDORRA to "ad",
            IsoCountry.ANGOLA to "ao",
            IsoCountry.ANGUILLA to "ai",
            IsoCountry.ANTARCTICA to "aq",
            IsoCountry.ANTIGUA_AND_BARBUDA to "ag",
            IsoCountry.ARGENTINA to "ar",
            IsoCountry.ARMENIA to "am",
            IsoCountry.ARUBA to "aw",
            IsoCountry.AUSTRALIA to "au",
            IsoCountry.AUSTRIA to "at",
            IsoCountry.AZERBAIJAN to "az",
            IsoCountry.BAHAMAS to "bs",
            IsoCountry.BAHRAIN to "bh",
            IsoCountry.BANGLADESH to "bd",
            IsoCountry.BARBADOS to "bb",
            IsoCountry.BELARUS to "by",
            IsoCountry.BELGIUM to "be",
            IsoCountry.BELIZE to "bz",
            IsoCountry.BENIN to "bj",
            IsoCountry.BERMUDA to "bm",
            IsoCountry.BHUTAN to "bt",
            IsoCountry.BOLIVIA to "bo",
            IsoCountry.BOSNIA_AND_HERZEGOVINA to "ba",
            IsoCountry.BOTSWANA to "bw",
            IsoCountry.BOUVET_ISLAND to "bv",
            IsoCountry.BRAZIL to "br",
            IsoCountry.BRITISH_INDIAN_OCEAN_TERRITORY to "io",
            IsoCountry.BRITISH_VIRGIN_ISLANDS to "vg",
            IsoCountry.BRUNEI to "bn",
            IsoCountry.BULGARIA to "bg",
            IsoCountry.BURKINA_FASO to "bf",
            IsoCountry.BURUNDI to "bi",
            IsoCountry.CAMBODIA to "kh",
            IsoCountry.CAMEROON to "cm",
            IsoCountry.CANADA to "ca",
            IsoCountry.CAPE_VERDE to "cv",
            IsoCountry.CARIBBEAN_NETHERLANDS to "bq",
            IsoCountry.CAYMAN_ISLANDS to "ky",
            IsoCountry.CENTRAL_AFRICAN_REPUBLIC to "cf",
            IsoCountry.CHAD to "td",
            IsoCountry.CHILE to "cl",
            IsoCountry.CHINA to "cn",
            IsoCountry.CHRISTMAS_ISLAND to "cx",
            IsoCountry.COCOS_ISLANDS to "cc",
            IsoCountry.COLOMBIA to "co",
            IsoCountry.COMOROS to "km",
            IsoCountry.CONGO_BRAZZAVILLE to "cg",
            IsoCountry.CONGO_KINSHASA to "cd",
            IsoCountry.COOK_ISLANDS to "ck",
            IsoCountry.COSTA_RICA to "cr",
            IsoCountry.COTE_DIVOIRE to "ci",
            IsoCountry.CROATIA to "hr",
            IsoCountry.CUBA to "cu",
            IsoCountry.CURACAO to "cw",
            IsoCountry.CYPRUS to "cy",
            IsoCountry.CZECHIA to "cz",
            IsoCountry.DENMARK to "dk",
            IsoCountry.DJIBOUTI to "dj",
            IsoCountry.DOMINICA to "dm",
            IsoCountry.DOMINICAN_REPUBLIC to "do",
            IsoCountry.ECUADOR to "ec",
            IsoCountry.EGYPT to "eg",
            IsoCountry.EL_SALVADOR to "sv",
            IsoCountry.EQUATORIAL_GUINEA to "gq",
            IsoCountry.ERITREA to "er",
            IsoCountry.ESTONIA to "ee",
            IsoCountry.ETHIOPIA to "et",
            IsoCountry.FALKLAND_ISLANDS_ to "fk",
            IsoCountry.FAROE_ISLANDS to "fo",
            IsoCountry.FIJI to "fj",
            IsoCountry.FINLAND to "fi",
            IsoCountry.FRANCE to "fr",
            IsoCountry.FRENCH_GUIANA to "gf",
            IsoCountry.FRENCH_POLYNESIA to "pf",
            IsoCountry.FRENCH_SOUTHERN_TERRITORIES to "tf",
            IsoCountry.GABON to "ga",
            IsoCountry.GAMBIA to "gm",
            IsoCountry.GEORGIA to "ge",
            IsoCountry.GERMANY to "de",
            IsoCountry.GHANA to "gh",
            IsoCountry.GIBRALTAR to "gi",
            IsoCountry.GREECE to "gr",
            IsoCountry.GREENLAND to "gl",
            IsoCountry.GRENADA to "gd",
            IsoCountry.GUADELOUPE to "gp",
            IsoCountry.GUAM to "gu",
            IsoCountry.GUATEMALA to "gt",
            IsoCountry.GUERNSEY to "gg",
            IsoCountry.GUINEA to "gn",
            IsoCountry.GUINEA_BISSAU to "gw",
            IsoCountry.GUYANA to "gy",
            IsoCountry.HAITI to "ht",
            IsoCountry.HEARD_AND_MCDONALD_ISLANDS to "hm",
            IsoCountry.HONDURAS to "hn",
            IsoCountry.HONG_KONG to "hk",
            IsoCountry.HUNGARY to "hu",
            IsoCountry.ICELAND to "is",
            IsoCountry.INDIA to "in",
            IsoCountry.INDONESIA to "id",
            IsoCountry.IRAN to "ir",
            IsoCountry.IRAQ to "iq",
            IsoCountry.IRELAND to "ie",
            IsoCountry.ISLE_OF_MAN to "im",
            IsoCountry.ISRAEL to "il",
            IsoCountry.ITALY to "it",
            IsoCountry.JAMAICA to "jm",
            IsoCountry.JAPAN to "jp",
            IsoCountry.JERSEY to "je",
            IsoCountry.JORDAN to "jo",
            IsoCountry.KAZAKHSTAN to "kz",
            IsoCountry.KENYA to "ke",
            IsoCountry.KIRIBATI to "ki",
            IsoCountry.KUWAIT to "kw",
            IsoCountry.KYRGYZSTAN to "kg",
            IsoCountry.LAOS to "la",
            IsoCountry.LATVIA to "lv",
            IsoCountry.LEBANON to "lb",
            IsoCountry.LESOTHO to "ls",
            IsoCountry.LIBERIA to "lr",
            IsoCountry.LIBYA to "ly",
            IsoCountry.LIECHTENSTEIN to "li",
            IsoCountry.LITHUANIA to "lt",
            IsoCountry.LUXEMBOURG to "lu",
            IsoCountry.MACAU to "mo",
            IsoCountry.MACEDONIA to "mk",
            IsoCountry.MADAGASCAR to "mg",
            IsoCountry.MALAWI to "mw",
            IsoCountry.MALAYSIA to "my",
            IsoCountry.MALDIVES to "mv",
            IsoCountry.MALI to "ml",
            IsoCountry.MALTA to "mt",
            IsoCountry.MARSHALL_ISLANDS to "mh",
            IsoCountry.MARTINIQUE to "mq",
            IsoCountry.MAURITANIA to "mr",
            IsoCountry.MAURITIUS to "mu",
            IsoCountry.MAYOTTE to "yt",
            IsoCountry.MEXICO to "mx",
            IsoCountry.MICRONESIA to "fm",
            IsoCountry.MOLDOVA to "md",
            IsoCountry.MONACO to "mc",
            IsoCountry.MONGOLIA to "mn",
            IsoCountry.MONTENEGRO to "me",
            IsoCountry.MONTSERRAT to "ms",
            IsoCountry.MOROCCO to "ma",
            IsoCountry.MOZAMBIQUE to "mz",
            IsoCountry.MYANMAR to "mm",
            IsoCountry.NAMIBIA to "na",
            IsoCountry.NAURU to "nr",
            IsoCountry.NEPAL to "np",
            IsoCountry.NETHERLANDS to "nl",
            IsoCountry.NEW_CALEDONIA to "nc",
            IsoCountry.NEW_ZEALAND to "nz",
            IsoCountry.NICARAGUA to "ni",
            IsoCountry.NIGER to "ne",
            IsoCountry.NIGERIA to "ng",
            IsoCountry.NIUE to "nu",
            IsoCountry.NORFOLK_ISLAND to "nf",
            IsoCountry.NORTHERN_MARIANA_ISLANDS to "mp",
            IsoCountry.NORTH_KOREA to "kp",
            IsoCountry.NORWAY to "no",
            IsoCountry.OMAN to "om",
            IsoCountry.PAKISTAN to "pk",
            IsoCountry.PALAU to "pw",
            IsoCountry.PALESTINE to "ps",
            IsoCountry.PANAMA to "pa",
            IsoCountry.PAPUA_NEW_GUINEA to "pg",
            IsoCountry.PARAGUAY to "py",
            IsoCountry.PERU to "pe",
            IsoCountry.PHILIPPINES to "ph",
            IsoCountry.PITCAIRN_ISLANDS to "pn",
            IsoCountry.POLAND to "pl",
            IsoCountry.PORTUGAL to "pt",
            IsoCountry.PUERTO_RICO to "pr",
            IsoCountry.QATAR to "qa",
            IsoCountry.REUNION to "re",
            IsoCountry.ROMANIA to "ro",
            IsoCountry.RUSSIA to "ru",
            IsoCountry.RWANDA to "rw",
            IsoCountry.SAMOA to "ws",
            IsoCountry.SAN_MARINO to "sm",
            IsoCountry.SAO_TOME_AND_PRINCIPE to "st",
            IsoCountry.SAUDI_ARABIA to "sa",
            IsoCountry.SENEGAL to "sn",
            IsoCountry.SERBIA to "rs",
            IsoCountry.SEYCHELLES to "sc",
            IsoCountry.SIERRA_LEONE to "sl",
            IsoCountry.SINGAPORE to "sg",
            IsoCountry.SINT_MAARTEN to "sx",
            IsoCountry.SLOVAKIA to "sk",
            IsoCountry.SLOVENIA to "si",
            IsoCountry.SOLOMON_ISLANDS to "sb",
            IsoCountry.SOMALIA to "so",
            IsoCountry.SOUTH_AFRICA to "za",
            IsoCountry.SOUTH_GEORGIA_AND_SOUTH_SANDWICH_ISLANDS to "gs",
            IsoCountry.SOUTH_KOREA to "kr",
            IsoCountry.SOUTH_SUDAN to "ss",
            IsoCountry.SPAIN to "es",
            IsoCountry.SRI_LANKA to "lk",
            IsoCountry.ST_BARTHELEMY to "bl",
            IsoCountry.ST_HELENA to "sh",
            IsoCountry.ST_KITTS_AND_NEVIS to "kn",
            IsoCountry.ST_LUCIA to "lc",
            IsoCountry.ST_MARTIN to "mf",
            IsoCountry.ST_PIERRE_AND_MIQUELON to "pm",
            IsoCountry.ST_VINCENT_AND_GRENADINES to "vc",
            IsoCountry.SUDAN to "sd",
            IsoCountry.SURINAME to "sr",
            IsoCountry.SVALBARD_AND_JAN_MAYEN to "sj",
            IsoCountry.SWAZILAND to "sz",
            IsoCountry.SWEDEN to "se",
            IsoCountry.SWITZERLAND to "ch",
            IsoCountry.SYRIA to "sy",
            IsoCountry.TAIWAN to "tw",
            IsoCountry.TAJIKISTAN to "tj",
            IsoCountry.TANZANIA to "tz",
            IsoCountry.THAILAND to "th",
            IsoCountry.TIMOR_LESTE to "tl",
            IsoCountry.TOGO to "tg",
            IsoCountry.TOKELAU to "tk",
            IsoCountry.TONGA to "to",
            IsoCountry.TRINIDAD_AND_TOBAGO to "tt",
            IsoCountry.TUNISIA to "tn",
            IsoCountry.TURKEY to "tr",
            IsoCountry.TURKMENISTAN to "tm",
            IsoCountry.TURKS_AND_CAICOS_ISLANDS to "tc",
            IsoCountry.TUVALU to "tv",
            IsoCountry.UGANDA to "ug",
            IsoCountry.UKRAINE to "ua",
            IsoCountry.UNITED_ARAB_EMIRATES to "ae",
            IsoCountry.UNITED_KINGDOM to "gb",
            IsoCountry.UNITED_STATES to "us",
            IsoCountry.URUGUAY to "uy",
            IsoCountry.US_OUTLYING_ISLANDS to "um",
            IsoCountry.US_VIRGIN_ISLANDS to "vi",
            IsoCountry.UZBEKISTAN to "uz",
            IsoCountry.VANUATU to "vu",
            IsoCountry.VATICAN_CITY to "va",
            IsoCountry.VENEZUELA to "ve",
            IsoCountry.VIETNAM to "vn",
            IsoCountry.WALLIS_AND_FUTUNA to "wf",
            IsoCountry.WESTERN_SAHARA to "eh",
            IsoCountry.YEMEN to "ye",
            IsoCountry.ZAMBIA to "zm",
            IsoCountry.ZIMBABWE to "zw"
        )
    }
}
